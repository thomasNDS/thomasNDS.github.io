(function(e){e.fn.dropit=function(t){var n={init:function(t){this.dropit.settings=e.extend({},this.dropit.defaults,t);return this.each(function(){var t=e(this),n=this,r=e.fn.dropit.settings;t.addClass("dropit").find(">"+r.triggerParentEl+":has("+r.submenuEl+")").addClass("dropit-trigger").find(r.submenuEl).addClass("dropit-submenu").hide();t.on(r.action,r.triggerParentEl+":has("+r.submenuEl+") > "+r.triggerEl+"",function(){if(r.action=="click"&&e(this).parents(r.triggerParentEl).hasClass("dropit-open")){r.beforeHide.call(this);e(this).parents(r.triggerParentEl).removeClass("dropit-open").find(r.submenuEl).hide();r.afterHide.call(this);return false}r.beforeHide.call(this);e(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide();r.afterHide.call(this);r.beforeShow.call(this);e(this).parents(r.triggerParentEl).addClass("dropit-open").find(r.submenuEl).show();r.afterShow.call(this);return false});e(document).on("click",function(){r.beforeHide.call(this);e(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide();r.afterHide.call(this)});if(r.action=="mouseenter"){t.on("mouseleave",function(){r.beforeHide.call(this);e(this).removeClass("dropit-open").find(r.submenuEl).hide();r.afterHide.call(this)})}r.afterLoad.call(this)})}};if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return n.init.apply(this,arguments)}else{e.error('Method "'+t+'" does not exist in dropit plugin!')}};e.fn.dropit.defaults={action:"click",submenuEl:"ul",triggerEl:"a",triggerParentEl:"li",afterLoad:function(){},beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){}};e.fn.dropit.settings={}})(jQuery)